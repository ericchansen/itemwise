{"id":"inventory-assistant-12u","title":"Add user authentication and multi-tenant data isolation","description":"Add user registration and login functionality so each user has their own isolated inventory data.\n\n## Requirements\n- **Registration**: New users can create an account (email/password)\n- **Login**: Users authenticate to access the app\n- **Data isolation**: Each user only sees/manages their own inventory items\n- **Session management**: Secure session handling with proper logout\n\n## Technical Considerations\n- Add users table with password hashing (bcrypt)\n- Add user_id foreign key to inventory tables\n- Implement JWT or session-based auth\n- Protect all API endpoints with auth middleware\n- Update frontend with login/register pages","notes":"## Current State\n**Branch:** `feat/bd-12u-user-authentication`\n**PR:** #5 (open, CI failing)\n**Stash:** `stash@{0}` contains test fixes\n\n## What's Been Completed (committed in PR #5)\n- User model with `email`, `password_hash`, `is_active` fields\n- `user_id` FK added to `InventoryItem` and `Location` models\n- Auth endpoints: `/api/auth/register`, `/api/auth/login`, `/api/auth/me`\n- JWT token utilities in `auth.py`\n- bcrypt password hashing via passlib\n- Frontend login/register UI\n- Alembic migration\n\n## Why CI is Failing\n`TypeError: create_item() missing 1 required positional argument: 'user_id'`\n\nCRUD functions were updated to require `user_id` for multi-tenant isolation, but tests weren't updated.\n\n## Fix Available in Stash\n`stash@{0}` on this branch contains:\n- `tests/conftest.py`: Added `test_user` fixture\n- `tests/test_crud.py`: All CRUD calls updated with `user_id` parameter\n- Additional mock embedding patches\n\n## Next Steps (after bd-g7t merged)\n1. `git checkout feat/bd-12u-user-authentication`\n2. `git pull origin master --rebase`\n3. `git stash pop`\n4. Verify CRUD functions have `user_id` parameter\n5. `uv run pytest -v`\n6. `uv run ruff check src/`\n7. `git add -A \u0026\u0026 git commit -m 'fix: Update tests with user_id parameter (bd-12u)'`\n8. `git push --force-with-lease`\n9. Verify CI passes, merge PR #5\n\n## CRUD Signatures After Auth\n- `create_item(session, user_id, name, quantity, category, ...)`\n- `get_item(session, user_id, item_id)`\n- `list_items(session, user_id, ...)`\n- `update_item(session, user_id, item_id, ...)`\n- `delete_item(session, user_id, item_id)`\n\n## Blocked By\n- bd-g7t must be merged first","status":"open","priority":2,"issue_type":"feature","owner":"erichansen@microsoft.com","created_at":"2026-02-04T17:29:57.7885204-06:00","created_by":"Eric Hansen","updated_at":"2026-02-04T23:04:02.7557167-06:00","dependencies":[{"issue_id":"inventory-assistant-12u","depends_on_id":"inventory-assistant-g7t","type":"blocks","created_at":"2026-02-04T22:53:40.0608026-06:00","created_by":"Eric Hansen"}],"comments":[{"id":2,"issue_id":"inventory-assistant-12u","author":"Eric Hansen","text":"Work not complete - tests need user_id fixes, PR still open","created_at":"2026-02-05T04:53:06Z"}]}
{"id":"inventory-assistant-5kj","title":"Set up Azure OIDC authentication for GitHub Actions","description":"Configure federated identity credentials so GitHub Actions can deploy to Azure without storing secrets.\n\n## Tasks\n- Create Microsoft Entra app registration\n- Configure federated credential for main branch\n- Assign Contributor role at subscription level\n- Add GitHub secrets: AZURE_CLIENT_ID, AZURE_TENANT_ID, AZURE_SUBSCRIPTION_ID\n- Test with az account show workflow\n\n## Reference\nhttps://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/deploy-github-actions","notes":"OIDC may not be needed if we deploy locally via script. Re-evaluate after CI fix and deploy script are done.","status":"closed","priority":3,"issue_type":"chore","owner":"erichansen@microsoft.com","created_at":"2026-02-02T13:14:15.2418604-06:00","created_by":"Eric Hansen","updated_at":"2026-02-04T22:59:11.1329029-06:00","closed_at":"2026-02-04T22:59:11.1329029-06:00","close_reason":"Not needed - deploying locally via scripts/deploy.ps1, not from GitHub Actions"}
{"id":"inventory-assistant-aez","title":"Rename all references from inventory-assistant to itemwise","description":"Standardize naming across the project to use 'itemwise' instead of 'inventory-assistant'.\n\n## Areas to update\n- azure.yaml (name field)\n- docker-compose.yml (container names)\n- Dockerfile comments\n- GitHub repo name (if applicable)\n- Bicep resource naming\n- README and documentation\n- Any other references\n\n## Acceptance Criteria\n- All references consistently use 'itemwise'\n- No breaking changes to deployment","status":"closed","priority":3,"issue_type":"chore","owner":"erichansen@microsoft.com","created_at":"2026-02-02T13:24:43.4544621-06:00","created_by":"Eric Hansen","updated_at":"2026-02-02T13:41:00.4497212-06:00","closed_at":"2026-02-02T13:41:00.4497212-06:00","close_reason":"PR created for renaming"}
{"id":"inventory-assistant-dep","title":"Fix CI: commit uv.lock file","status":"closed","priority":1,"issue_type":"bug","owner":"erichansen@microsoft.com","created_at":"2026-02-02T09:34:16.5539003-06:00","created_by":"Eric Hansen","updated_at":"2026-02-02T09:35:43.023554-06:00","closed_at":"2026-02-02T09:35:43.023554-06:00","close_reason":"Closed"}
{"id":"inventory-assistant-g7t","title":"Fix broken CI/CD pipeline","description":"CI pipeline is broken and needs immediate attention.\n\n## Issues to investigate\n- Tests failing in CI\n- Linter not running correctly\n- Coverage requirements may be misconfigured\n\n## Acceptance Criteria\n- All tests pass in CI\n- Linting passes\n- CI completes successfully on push to master","notes":"## Current State\n**Branch:** `fix/bd-g7t-ci-workflow` (uncommitted changes ready)\n**PRs:** #3 and #4 closed/superseded - this branch has the combined fixes\n\n## Uncommitted Changes Ready to Commit\n1. `.github/workflows/ci.yml` - Docker build job removed (was timing out on HuggingFace model download)\n2. `pyproject.toml` - Ruff linter added to dev deps + config (line-length=140, ignores E402/F821/W293)\n3. `tests/conftest.py` - Mock embedding fixture (autouse) patches all embedding functions\n4. `src/itemwise/ai_client.py` - Long line fixes\n5. `src/itemwise/api.py` - Unused import removed\n\n## Next Steps\n1. Start test database: `docker-compose up -d`\n2. Run tests: `uv run pytest -v`\n3. Run linter: `uv run ruff check src/`\n4. Commit: `git add -A \u0026\u0026 git commit -m 'fix: Fix CI pipeline with mock embeddings and ruff config (bd-g7t)'`\n5. Push and create PR\n6. Verify CI passes, merge to master\n\n## Key Technical Details\n- CI failed because Docker build downloaded HuggingFace model (timeout)\n- Solution: Mock embeddings in tests + remove Docker build from CI\n- Mock returns fixed 384-dim vector matching all-MiniLM-L6-v2\n\n## Blocks\n- bd-12u (authentication) is blocked by this","status":"in_progress","priority":1,"issue_type":"bug","owner":"erichansen@microsoft.com","created_at":"2026-02-02T13:59:56.0037273-06:00","created_by":"Eric Hansen","updated_at":"2026-02-05T09:31:03.3198393-06:00","comments":[{"id":1,"issue_id":"inventory-assistant-g7t","author":"Eric Hansen","text":"Work not complete - CI fixes need to be properly committed and tested","created_at":"2026-02-05T04:53:06Z"}]}
{"id":"inventory-assistant-rzz","title":"Rebase and squash CI commits on master","description":"The master branch has accumulated messy CI iteration commits that should be squashed/rebased into cleaner commits. This will make the git history more readable and maintainable.\n\n## Tasks\n- Review commits on master that are CI-related iterations\n- Interactive rebase to squash related commits\n- Force push cleaned history (coordinate with team if needed)\n\n## Lesson Learned\nUse feature branches + PRs for CI/CD work to avoid polluting master with iteration commits.","status":"closed","priority":3,"issue_type":"chore","owner":"erichansen@microsoft.com","created_at":"2026-02-02T12:14:20.6559409-06:00","created_by":"Eric Hansen","updated_at":"2026-02-02T12:16:57.0802077-06:00","closed_at":"2026-02-02T12:16:57.0802077-06:00","close_reason":"Closed"}
{"id":"inventory-assistant-zua","title":"Create local deploy script with tear down and stand up","description":"Create scripts/deploy.sh that builds Docker image locally and pushes to ACR. This avoids HuggingFace timeout issues in GitHub Actions.\n\n## Script should support:\n- **Build**: Build Docker image locally\n- **Push**: Push to ACR\n- **Stand up**: Deploy/update Container Apps\n- **Tear down**: Remove deployed resources (for cleanup/redeployment)\n\n## Commands\n- ./scripts/deploy.sh build - Build image\n- ./scripts/deploy.sh push - Push to ACR\n- ./scripts/deploy.sh up - Deploy to Azure\n- ./scripts/deploy.sh down - Tear down resources\n- ./scripts/deploy.sh all - Full deploy (build + push + up)","notes":"PR #4 created: Deploy script with build/push/up/down commands","status":"closed","priority":2,"issue_type":"task","owner":"erichansen@microsoft.com","created_at":"2026-02-02T22:17:14.9984522-06:00","created_by":"Eric Hansen","updated_at":"2026-02-04T17:34:16.0217737-06:00","closed_at":"2026-02-04T17:34:16.0217737-06:00"}
